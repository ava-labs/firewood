[workspace]
members = [
  "firewood",
  "fwdctl",
  "storage",
  "benchmark",
  "ffi",
  "triehash",
]
resolver = "2"

[profile.release]
debug = true

[profile.maxperf]
panic = "abort"
codegen-units = 1
lto = "fat"
debug = false
inherits = "release"

[workspace.lints.rust]
unsafe_code = "deny"

[workspace.lints.clippy]
unwrap_used = "warn"
indexing_slicing = "warn"
explicit_deref_methods = "warn"
missing_const_for_fn = "warn"
arithmetic_side_effects = "warn"
# lower the priority of pedantic to allow overriding the lints it includes
pedantic = { level = "warn", priority = -1 }
# Ignore interger casts. This is to avoid unnecessary `try_into` calls for usize
# to u64 and vice versa and should be re-enabled if/when clippy has a separate
# lint for usize vs non-usize truncation.
cast_possible_truncation = { level = "allow" }

[workspace.dependencies]
metrics = "0.24.2"
metrics-util = "0.20.0"
sha2 = "0.10.8"
tokio = "1.36.0"
clap = { version = "4.5.0", features = ["derive"] }
fastrace = "0.7.4"
bincode = "1.3.3"
serde = "1.0.199"
thiserror = "2.0.3"
coarsetime = "0.1.36"
integer-encoding = "4.0.0"
env_logger = "0.11.7"
smallvec = "1.6.1"

# dev dependencies
rand = "0.9.1"
criterion = "0.6.0"
pprof = "0.15.0"
tempfile = "3.12.0"
ethereum-types = "0.15.1"
hex-literal = "1.0.0"
